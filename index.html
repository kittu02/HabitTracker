<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="tracker-stats.css">
    <link rel="stylesheet" href="styles/index-styles.css" />
    <link rel="stylesheet" href="habit_freq.css">
    <link rel="stylesheet" href="linestats.css">
    <link rel="stylesheet" href="slider.css">

    <link rel="stylesheet" href="grid.css">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Habit Tracker</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <style>
      @import url("https://fonts.googleapis.com/css?family=Poppins:400,700,900");
    </style>
  </head>
  <link rel="stylesheet" href="habit.css">
  <link rel="stylesheet" href="user_navbar.css">
  <style>
    
    
  </style>
</head>

<body>
  <div class="grid-container">
    <div class="grid-item grid-item-1">  <div class="card">
      <div class="card-header">
        Stats
      </div>
      
      <div class="card-body">
        <canvas id="habitChart" width="300" height="150"></canvas>
      </div>
      
      <div class="card-footer">
        <strong>+2.5%</strong> improvement this week!
      </div>
    </div></div>
    <div class="grid-item grid-item-2">
      <div class="tracker-container">
          <!-- Water Intake Tracker -->
          <div class="tracker-card water">
              <h2>Water</h2>
              <div class="progress-circle">
                <svg width="100" height="100">
                    <circle class="circle-bg" cx="50" cy="50" r="45"></circle> <!-- Adjusted cx and cy to 50 -->
                    <circle class="circle-progress water-progress" cx="50" cy="50" r="45"></circle>
                </svg>
                <div class="progress-text">49%</div>
            </div>
            
              <div class="stats">
                  Average intake per day<br />
                  <strong>1200ml</strong>
              </div>
              <div class="wave">
                  <span>+50 ml</span>
              </div>
          </div>
          <div class="tracker-card water">
            <h2>Protein</h2>
            <div class="progress-circle">
              <svg width="100" height="100">
                  <circle class="circle-bg" cx="50" cy="50" r="45"></circle> <!-- Adjusted cx and cy to 50 -->
                  <circle class="circle-progress water-progress" cx="50" cy="50" r="45"></circle>
              </svg>
              <div class="progress-text">20%</div>
          </div>
          
            <div class="stats">
                Average intake per day<br />
                <strong>110gm </strong>
            </div>
            <div class="wave">
                <span>+10 gm</span>
            </div>
        </div>

          <!-- Steps Tracker -->

      </div>
  </div>    <div class="grid-item grid-item-3"> 
       <div class="navbar">
    <span style="color: rgba(0, 0, 255, 0);"></span><h2 class="fs-5">Umang Hirani        <span style="color: rgba(0, 0, 255, 0);">asdfasdfjhjhlkjlkkjlj</span>    <i class="fas fa-user"></i>
    </h2>
    <div class="user-icon">
    </div>
</div></div>

    <div class="grid-item grid-item-4">  <div class="habit-tracker">
      <h2>Habit Tracker</h2>
      <div class="habit">
        <input type="checkbox" id="habit1">
        <label for="habit1">Reading</label>
      </div>
      <div class="habit">
        <input type="checkbox" id="habit2">
        <label for="habit2">Meditation</label>
      </div>
      <div class="habit">
        <input type="checkbox" id="habit3">
        <label for="habit3">Workout</label>
      </div>
      <div class="habit">
        <input type="checkbox" id="habit4">
        <label for="habit4">Learn Spanish</label>
      </div>
      <div class="habit">
        <input type="checkbox" id="habit5">
        <label for="habit5">Go for a Walk</label>
      </div>
      <div class="habit">
        <input type="checkbox" id="habit6">
        <label for="habit6">Cook healthy </label>
      </div>


    </div></div>
    <div class="grid-item grid-item-6"><div class="card flex ">
      <!-- <div class="header"><b>HABIT FREQUENCY</b></div> -->
      <div class="activity-container">
        <div class="activity-grid" id="activityGrid"></div>
        <div class="days-column">
          <div class="day-name sunday" id="sundayDate">SUN</div>
          <div class="day-name">MON</div>
          <div class="day-name">TUE</div>
          <div class="day-name">WED</div>
          <div class="day-name">THU</div>
          <div class="day-name">FRI</div>
          <div class="day-name">SAT</div>
        </div>
      </div>
    </div></div>
    <div class="grid-item grid-item-5 habit-hustle">HABIT HUSTLE</div>

    <div class="grid-item grid-item-7 ">  <div class="carousel-container">
      <div class="carousel" id="carousel">
        <div class="carousel-slide slide-1">
          <div class="habit-info">
            <p class="habit-name">Reading</p>
            <p class="percentage">68%</p>
          </div>
        </div>
        <div class="carousel-slide slide-2">
          <div class="habit-info">
            <p class="habit-name">Workout</p>
            <p class="percentage">50%</p>
          </div>
        </div>
        <div class="carousel-slide slide-3">
          <div class="habit-info">
            <p class="habit-name">Meditation</p>
            <p class="percentage">80%</p>
          </div>
        </div>
      </div>
    </div></div>
    <div class="grid-item grid-item-9 " style="
    text-align: center;
    justify-content: center;" >"First we make our habits, then our habits make us."</div>
    <div class="grid-item grid-item-navbar border-0 ">
      <div class="navbar">
        <div class="logo">
          <span>HT</span>
        </div>
        <div class="navbar-item">
          <img src="styles/images/person-running-solid (1).svg" />
        </div>
        <div class="navbar-item">
          <img src="styles/images/chart-line-solid (1).svg" />
        </div>
        <div class="navbar-item">
          <img src="styles/images/bullseye-solid (1).svg" />
        </div>
        <div class="navbar-item">
          <img src="styles/images/star-solid (1).svg" />
        </div>
        <div class="navbar-item dark-light-mode">
          <img src="styles/images/moon-solid.svg" />
        </div>
      </div>
  </div>
  
  </div>
</body>
<script>
  const circleCircumference = 283;
  const waterProgressValue = 68; // 68%
  const stepsProgressValue = 85; // 85%

  const calculateProgress = (value) => {
      return circleCircumference * (1 - value / 100);
  };

  const setProgress = (element, value) => {
      const progressCircle = document.querySelector(element);
      progressCircle.style.strokeDashoffset = circleCircumference;
      setTimeout(() => {
          progressCircle.classList.add('animate');
          progressCircle.style.strokeDashoffset = calculateProgress(value);
      }, 100);
  };

  setProgress('.water-progress', waterProgressValue);
  setProgress('.steps-progress', stepsProgressValue);
</script>
<script>
  // Data for activity grid (1-4 intensity, 0 no activity)
  const activityData = [
    [1, 2, 3, 4, 0],  // Row 1 (Sunday)
    [2, 1, 4, 0, 3],  // Row 2 (Monday)
    [3, 4, 2, 1, 0],  // Row 3 (Tuesday)
    [1, 0, 3, 2, 4],  // Row 4 (Wednesday)
    [0, 2, 1, 3, 3],  // Row 5 (Thursday)
    [0, 2, 1, 3, 2],  // Row 6 (Friday)
    [1, 0, 3, 2, 4],  // Row 7 (Saturday)
  ];

  const gridContainer = document.getElementById('activityGrid');

  // Calculate today's date and find the date for Sunday
  const today = new Date();
  const dayOfWeek = today.getDay(); // Sunday - 0, Monday - 1, ..., Saturday - 6
  const sundayDate = new Date(today);
  sundayDate.setDate(today.getDate() - dayOfWeek); // Set to last Sunday

  // Set the date for Sunday above the grid
  // document.getElementById('sundayDate').textContent = `SUN ${sundayDate.getDate()}`;

  // Create grid cells for 7x5 days (one cell for each day)
  for (let i = 0; i < 7; i++) {
    const dayDiv = document.createElement('div');
    dayDiv.classList.add('day');

    // Calculate date for each day of the week
    const currentDate = new Date(sundayDate);
    currentDate.setDate(sundayDate.getDate() + i); // Add days to get the correct date

    // Create grid blocks for each day in the week
    activityData[i].forEach((day, colIndex) => {
      const gridBlock = document.createElement('div');
      gridBlock.classList.add('day');

      // Apply different levels of color and glow based on activity
      if (day === 1) {
        gridBlock.classList.add('level-1');
      } else if (day === 2) {
        gridBlock.classList.add('level-2');
      } else if (day === 3) {
        gridBlock.classList.add('level-3');
      } else if (day === 4) {
        gridBlock.classList.add('level-4');
      }

      // Add the tooltip for date
      const gridTooltip = document.createElement('div');
      gridTooltip.className = 'tooltip';
      gridTooltip.textContent = `${currentDate.getDate()}/${currentDate.getMonth() + 1}`; // Format: DD/MM
      gridBlock.appendChild(gridTooltip);

      // Delay the animation for each dot
      const delay = (i * 5 + colIndex) * 0.1; // Sequential delay for each dot
      gridBlock.style.animationDelay = `${delay}s`;

      gridContainer.appendChild(gridBlock);
    });
  }
</script>
<script>
  // Function to get an array of the last 7 dates
  function getLast7Days() {
    const dates = [];
    const today = new Date();
    
    for (let i = 6; i >= 0; i--) {
      const pastDate = new Date(today);
      pastDate.setDate(today.getDate() - i); // Get past dates
      const formattedDate = `${pastDate.getMonth() + 1}/${pastDate.getDate()}`; // Format as MM/DD
      dates.push(formattedDate);
    }
    
    return dates;
  }

  // Sample frequency data for the last 7 days (generated randomly for demo)
  const frequencyData = [1.2, 1.5, 2.0, 2.5, 2.2, 2.3, 2.7]; 

  // Plugin to draw a vertical black line at the last data point
  const verticalLinePlugin = {
    id: 'lastPointLine',
    afterDatasetsDraw: function(chart) {
      const ctx = chart.ctx;
      const lastDataPoint = chart.getDatasetMeta(0).data[frequencyData.length - 1]; // Last data point

      // Draw vertical black line downwards
      ctx.save();
      ctx.beginPath();
      ctx.moveTo(lastDataPoint.x, lastDataPoint.y); // Start from the data point
      ctx.lineTo(lastDataPoint.x, chart.chartArea.bottom); // Extend line to the bottom of the chart
      ctx.lineWidth = 2;
      ctx.strokeStyle = '#000'; // Black color for the line
      ctx.stroke();
      ctx.restore();

      // Draw percentage improvement at the last point
      ctx.font = 'bold 12px Arial';
      ctx.fillStyle = '#fff'; // White text
      ctx.textAlign = 'center';
      ctx.fillText('+2.5%', lastDataPoint.x, lastDataPoint.y - 10); // Adjust text position above the point
    }
  };

  // Run the script after the window has loaded
  window.onload = function() {
    const dates = getLast7Days(); // Get last 7 days for x-axis labels

    // Get the canvas context
    const ctx = document.getElementById('habitChart').getContext('2d');

    // Create the gradient for the green shading under the line
    const gradient = ctx.createLinearGradient(0, 0, 0, 300);
    gradient.addColorStop(0, 'rgba(0, 200, 83, 0.5)');  // Green at the top
    gradient.addColorStop(1, 'rgba(0, 200, 83, 0)');    // Transparent at the bottom

    // Create the line chart using Chart.js
    const habitChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: dates,  // Days of the week as MM/DD format
        datasets: [{
          label: 'Habit Frequency',
          data: frequencyData,  // Habit frequency data
          fill: true,
          borderColor: '#00c853', // Bright green line
          backgroundColor: gradient,  // Gradient shading below the line
          tension: 0.3,
          pointBackgroundColor: '#00c853', // Color the points
          pointBorderColor: '#fff',
          pointRadius: 5,
          pointHoverRadius: 8,
          borderWidth: 2,
          pointHoverBackgroundColor: '#fff',
          pointHoverBorderColor: '#00c853',
          pointHoverBorderWidth: 2
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false, // Hide the legend
          },
          tooltip: {
            callbacks: {
              label: function(tooltipItem) {
                return `+${tooltipItem.raw}%`;
              }
            }
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            title: {
              display: false,
            },
            ticks: {
              stepSize: 0.5,
              color: '#aaa',
            },
            grid: {
              display: false
            }
          },
          x: {
            title: {
              display: false,
            },
            ticks: {
              color: '#aaa',
            },
            grid: {
              display: false,
            }
          }
        }
      },
      plugins: [verticalLinePlugin] // Attach the custom plugin for the vertical line
    });
  };
</script>
<script>
  let index = 0;
  const slides = document.querySelectorAll('.carousel-slide');
  const totalSlides = slides.length;
  const carousel = document.getElementById('carousel');

  function showNextSlide() {
    index = (index + 1) % totalSlides;
    const offset = -index * 100;  // move the carousel by -100%, -200%, etc.
    carousel.style.transform = `translateX(${offset}%)`;
  }

  setInterval(showNextSlide, 5000);  // Carousel changes every 5 seconds
</script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</html>
